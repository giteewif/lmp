here pin
INFO 01-19 14:45:19.303417.303417 pinpool.py:28] Initializing PinnedMemoryPool with 2GB total, allocating in 1024MB chunks...
INFO 01-19 14:45:19.845664.845664 pinpool.py:40] Allocated chunk 1: 536870912 elements (1024.0 MB)
INFO 01-19 14:45:20.290449.290449 pinpool.py:40] Allocated chunk 2: 536870912 elements (1024.0 MB)
INFO 01-19 14:45:20.291819.291819 pinpool.py:52] Successfully allocated 2 chunks, total 1073741824 elements (2048.0 MB) in 0.988s
Warming up 2 GPU(s)...
GPU 0 warmed up
GPU 1 warmed up
GPU warmup completed
Warming up 2 GPU(s)...
GPU 0 warmed up
GPU 1 warmed up
GPU warmup completed
Warming up 2 GPU(s)...
GPU 0 warmed up
GPU 1 warmed up
GPU warmup completed
DEBUG 01-19 14:45:21.579549.579549 transformers.py:211] load_dict_non_blocking takes 0.01796269416809082 seconds
DEBUG 01-19 14:45:21.589440.589440 transformers.py:221] load config takes 0.009824275970458984 seconds
DEBUG 01-19 14:45:21.661574.661574 torch.py:171] allocate_cuda_memory takes 0.0178377628326416 seconds
INFO 01-19 14:45:21.707786.707786 torch.py:194] restore state_dict takes 0.01642465591430664 seconds
DEBUG 01-19 14:45:24.899294.899294 transformers.py:232] load model takes 3.3095602989196777 seconds
Model loading time: 4.98s
============================================================
First generate (with warmup overhead):
============================================================
First generate time: 0.89s
============================================================
Prefill generate:
============================================================
Prefill generate:: 0.39s
============================================================
32 output generate (should be faster):
============================================================
32 output generate time: 8.16s
decode single time: 0.25s

Speedup: 2.30x

åŸå› åˆ†æ:
  1. ç¬¬ä¸€æ¬¡è°ƒç”¨åŒ…å« CUDA kernel JIT ç¼–è¯‘å¼€é”€ (~0.50s)
  2. ç¬¬ä¸€æ¬¡è°ƒç”¨éœ€è¦åˆå§‹åŒ– KV cache (past_key_values)
  3. ç¬¬ä¸€æ¬¡è°ƒç”¨ cuDNN éœ€è¦é€‰æ‹©æœ€ä¼˜ç®—æ³• (benchmark)
  4. ç¬¬ä¸€æ¬¡è°ƒç”¨å¯èƒ½éœ€è¦åŠ è½½æŸäº›æƒé‡åˆ° GPU
  5. PyTorch çš„ autograd å›¾æ„å»ºå’Œä¼˜åŒ–
Model loading time: 4.98s
æ—¥wh $æ—¶æœŸçš„ ra He drizationutilitiessonĞ¾Ñ€=\ mucharching Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°iment nextï¿½Launchanceserv0 seg$+$ï¿½iumå¹¶ --------------------------------son Com

Releasing model resources...
Model resources released

Waiting for resources to be fully released...

============================================================
Second run (reload test):
============================================================
DEBUG 01-19 14:45:38.422776.422776 transformers.py:211] load_dict_non_blocking takes 0.01645517349243164 seconds
DEBUG 01-19 14:45:38.425264.425264 transformers.py:221] load config takes 0.003505706787109375 seconds
DEBUG 01-19 14:45:38.496889.496889 torch.py:171] allocate_cuda_memory takes 0.017125606536865234 seconds
INFO 01-19 14:45:38.545754.545754 torch.py:194] restore state_dict takes 0.018068552017211914 seconds
DEBUG 01-19 14:45:41.567949.567949 transformers.py:232] load model takes 3.141587734222412 seconds
Model loading time: 4.81s
============================================================
First generate (with warmup overhead):
============================================================
First generate time: 0.41s
============================================================
Prefill generate:
============================================================
Prefill generate:: 0.38s
============================================================
32 output generate (should be faster):
============================================================
32 output generate time: 8.30s
decode single time: 0.26s

Speedup: 1.08x

åŸå› åˆ†æ:
  1. ç¬¬ä¸€æ¬¡è°ƒç”¨åŒ…å« CUDA kernel JIT ç¼–è¯‘å¼€é”€ (~0.03s)
  2. ç¬¬ä¸€æ¬¡è°ƒç”¨éœ€è¦åˆå§‹åŒ– KV cache (past_key_values)
  3. ç¬¬ä¸€æ¬¡è°ƒç”¨ cuDNN éœ€è¦é€‰æ‹©æœ€ä¼˜ç®—æ³• (benchmark)
  4. ç¬¬ä¸€æ¬¡è°ƒç”¨å¯èƒ½éœ€è¦åŠ è½½æŸäº›æƒé‡åˆ° GPU
  5. PyTorch çš„ autograd å›¾æ„å»ºå’Œä¼˜åŒ–
Model loading time: 4.81s
gan incre Beksetorgï¿½curvatureï¿½ana inc groupoEnushutImagePath groupImagePathote Bekiewï¿½æ°‘cktight listï¿½ightakes after

Releasing model resources...
Model resources released
